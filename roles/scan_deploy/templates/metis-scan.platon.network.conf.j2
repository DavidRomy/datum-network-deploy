server {
        listen 443 ssl;
        server_name {{scan_server_name}};
        ssl_certificate {{ scan_ssl_cetificate}};
        ssl_certificate_key {{scan_ssl_cetificate_key}};
        ssl_protocols {{ scan_ssl_protocols }};
        ssl_ciphers {{scan_ssl_ciphers}};
        ssl_prefer_server_ciphers on;
        ssl_session_cache shared:SSL:10m;
        ssl_session_timeout 10m;
        charset utf-8;

        location /metis-scan {
                proxy_pass  http://localhost:{{scan_web_port}}/metis-scan;
                proxy_redirect          default;
                proxy_set_header        Host $host:$proxy_port;
                proxy_set_header        X-Real-IP $remote_addr;
                proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_http_version 1.1;
                proxy_read_timeout 86400;
        }
        location / {
                root {{scan_web_static_dir}};
                index index.html;
                try_files $uri $uri/ /index.html;
        }
}



server {
        listen 80;
        server_name {{scan_server_name}};
        charset utf-8;

        location /metis-scan {
                proxy_pass  http://localhost:{{scan_web_port}}/metis-scan;
                proxy_redirect          default;
                proxy_set_header        Host $host:$proxy_port;
                proxy_set_header        X-Real-IP $remote_addr;
                proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_http_version 1.1;
                proxy_read_timeout 86400;
        }
        location / {
                root {{scan_web_static_dir}};
                index index.html;
                try_files $uri $uri/ /index.html;
        }
}